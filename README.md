# Approaching
UCLA CS130 Project

## Usage

### Download and Set up
```
// clone the repository
git clone https://github.com/VincentD97/Approaching.git
cd Approaching

// install dependencies
npm run setup

// run backend NodeJS+ExpressJS server at localhost:3000 and React frontend server at localhost:3001
npm run dev
```

### Other scripts
```
npm run server      // run only the server

npm run client      // run only the client

npm run test-server // run backend test

npm run test-react  // run frontend test

npm run doc         // generate documentation
```

Note: Since some of the frontend test requires to connect to the server, the developers should run the tests with the server running.

## File Structure

```
Approaching
├── client
│   ├── public
│   │   ├── index.html          # html web page
│   │   └── ...
│   ├── src                     # source code for the client
│   │   ├── __tests__           # frontend test with jest and Enzyme
│   │   ├── actions             # Redux actions
│   │   ├── assets              # static assets, including images and css stylesheets
│   │   ├── components          # React components
│   │   │   ├── common          # common components. For now, only have Icon.js
│   │   │   ├── eventboard      # components for the eventboard, including Eventboard.js and Event.js
│   │   │   ├── itemboard       # components for the itemboard, including Itemboard.js and Layer.js
│   │   │   ├── popup           # components for the detail popup, including Popup.js, Row.js and
│   │   │   │                   # widgets for editing the details
│   │   │   ├── profile         # components for the profile settings
│   │   │   ├── Dashboard.js    # dashboard
│   │   │   ├── Header.js       # header
│   │   │   └── LoginButton.js  # facebook login button
│   │   ├── reducers            # Redux reducers
│   │   ├── App.js              # entry point of components
│   │   ├── config.js           # client configurations (set useTestingAccount to true to login with
│   │   │                       # testing credentials instead of the real facebookId and token
│   │   ├── index.js            # entry point of javascript files
│   │   └── ...
│   ├── package.json            # frontend npm dependencies
│   └── ...
├── doc                         # documentation generated by JSDoc
├── Selenium_Automation_Test    # frontend test code
├── src                         # source code for the server
│   ├── database                # database related implementations
│   ├── queries                 # queries related implementations
│   ├── routers                 # routers related implementations
│   ├── app.js                  # main code for building up the server
│   ├── config.js               # server configurations
│   └── ...
├── test
│   ├── database                # database related tests
│   │   ├── index.js            # entry point of database related tests
│   │   └── ...                 # detailed test cases
│   ├── queries                 # queries related tests
│   │   ├── index.js            # entry point of queries related tests
│   │   └── ...                 # detailed test cases
│   ├── routers                 # routers related tests
│   │   ├── index.js            # entry point of routers related tests
│   │   └── ...                 # detailed test cases
│   └── index.                  # entry point of the whole test
├── package.json                # npm project management configuration, including commandline scripts
└── README.md
```

## Server API

Goto these API endpoints in a browser and you should see expected response in plaintext.
At the same time, our mlab mongodb database should change accordingly.

`facebookId` and `accessToken` are required for all requests. Parameters that are not listed in "Required" column are optional.

### User

| Action |                                        Url                                       |   Required    |
|:------:|----------------------------------------------------------------------------------|:-------------:|
| Insert | `http://localhost:3000/users/insert?facebookId=&accessToken=&name=&email=`       | `name, email` |
| Update | `http://localhost:3000/users/update?facebookId=&accessToken=&email=&notifyTime=` |               |
| Remove | `http://localhost:3000/users/remove?facebookId=&accessToken=`                    |               |

### Item

| Action |                                        Url                                                                                      | Required |
|:------:|---------------------------------------------------------------------------------------------------------------------------------|:--------:|
| Insert | `http://localhost:3000/items/insert?facebookId=&accessToken=&name=&picture=&expireDate=&location=&description=&eventList=`      |    All   |
| Update | `http://localhost:3000/items/update?facebookId=&accessToken=&_id=&name=&picture=&expireDate=&location=&description=&eventList=` |   `_id`  |
| Remove | `http://localhost:3000/items/remove?facebookId=&accessToken=&_id=`                                                              |   `_id`  |

### Event

| Action |                                        Url                                                                                | Required |
|:------:|---------------------------------------------------------------------------------------------------------------------------|:--------:|
| Insert | `http://localhost:3000/events/insert?facebookId=&accessToken=&name=&picture=&time=&location=&description=&itemList=`      |    All   |
| Update | `http://localhost:3000/events/update?facebookId=&accessToken=&_id=&name=&picture=&time=&location=&description=&itemList=` |   `_id`  |
| Remove | `http://localhost:3000/events/remove?facebookId=&accessToken=&_id=`                                                       |   `_id`  |

### Get All Items and Events

|  Action   |                                        Url                       | Required |
|:---------:|------------------------------------------------------------------|:--------:|
| fetchProfile | `http://localhost:3000/fetchProfile?facebookId=&accessToken=` |          |
| fetchItems | `http://localhost:3000/fetchItems?facebookId=&accessToken=`     |          |
| fetchEvents | `http://localhost:3000/fetchEvents?facebookId=&accessToken=`   |          |